package com.helger.rabbit.proxy;

import com.helger.rabbit.util.ITrafficLogger;
import com.helger.rabbit.util.SimpleTrafficLogger;

/**
 * A class to track of multiple network flows.
 *
 * @author <a href="mailto:robo@khelekore.org">Robert Olofsson</a>
 */
public class TrafficLoggerHandler
{
  // normal client traffic
  private final ITrafficLogger client;

  // normal web connections (real servers or proxy up the chain).
  private final ITrafficLogger network;

  // cached resources
  private final ITrafficLogger cache;

  // internally generated by this proxy
  private final ITrafficLogger proxy;

  /**
   * Create a new TrafficLoggerHandler
   */
  public TrafficLoggerHandler ()
  {
    client = new SimpleTrafficLogger ();
    network = new SimpleTrafficLogger ();
    cache = new SimpleTrafficLogger ();
    proxy = new SimpleTrafficLogger ();
  }

  /**
   * Get the TrafficLogger with the traffic statistics for client data
   * 
   * @return the TrafficLogger for the client data
   */
  public ITrafficLogger getClient ()
  {
    return client;
  }

  /**
   * Get the TrafficLogger with the traffic statistics for network data
   * 
   * @return the TrafficLogger for network data
   */
  public ITrafficLogger getNetwork ()
  {
    return network;
  }

  /**
   * Get the TrafficLogger with the traffic statistics for cache data
   * 
   * @return the TrafficLogger for cache data
   */
  public ITrafficLogger getCache ()
  {
    return cache;
  }

  /**
   * Get the TrafficLogger with the traffic statistics for data to and from this
   * proxy
   * 
   * @return the TrafficLogger for the proxy data
   */
  public ITrafficLogger getProxy ()
  {
    return proxy;
  }

  /**
   * Add our statistics to the given other TrafficLoggerHandler.
   * 
   * @param other
   *        the TrafficLoggerHandler to update
   */
  public void addTo (final TrafficLoggerHandler other)
  {
    client.addTo (other.client);
    network.addTo (other.network);
    cache.addTo (other.cache);
    proxy.addTo (other.proxy);
  }

  /**
   * Zero out all statistics in this TrafficLoggerHandler.
   */
  public void clear ()
  {
    client.clear ();
    network.clear ();
    cache.clear ();
    proxy.clear ();
  }
}
